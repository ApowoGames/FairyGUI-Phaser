"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateFairyGuiTest"]("main",{

/***/ "./src/Basics/BasicsScene.ts":
/*!***********************************!*\
  !*** ./src/Basics/BasicsScene.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BasicsScene\": () => (/* binding */ BasicsScene)\n/* harmony export */ });\n/* harmony import */ var fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fairygui-phaser */ \"../../pixelpai/game-core-ui/build/fairygui.esm.js\");\n/* harmony import */ var _TestWin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TestWin */ \"./src/Basics/TestWin.ts\");\n\n\nclass BasicsScene extends Phaser.Scene {\n    constructor(config) {\n        super(config);\n        this._timeDelta = 5;\n        //------------------------------\n        this.startPos = new Phaser.Geom.Point();\n    }\n    preload() {\n        this.load.binary(\"Basics\", \"assets/Basics.fui\");\n    }\n    create(data) {\n        const width = 1000;\n        const height = 1000;\n        const con = this.add.container(0, 0);\n        con.setSize(width, height);\n        // con.skewX = (30 * Math.PI) / 180;\n        con.setInteractive();\n        // 初始化ui,为了不影响外部ui的逻辑，直接将container传入ui库中，不影响\n        fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.GRoot.inst.attachTo(this, {\n            osd: \"\", res: \"assets/\",\n            resUI: \"assets/\", dpr: 1, width, height,\n            container: con\n        });\n        fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.UIPackage.loadPackage(\"Basics\").then((pkg) => {\n            // tslint:disable-next-line:no-console\n            console.log(\"fui ===>\", pkg);\n            // ============= Basics\n            fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.UIPackage.createObject(\"Basics\", \"Main\").then((obj) => {\n                this._view = obj.asCom;\n                fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.GRoot.inst.addChild(this._view);\n                this._backBtn = this._view.getChild(\"btn_Back\");\n                this._backBtn.visible = false;\n                this._backBtn.onClick(this.onClickBack, this);\n                this._demoContainer = this._view.getChild(\"container\").asCom;\n                this._cc = this._view.getController(\"c1\");\n                var cnt = this._view.numChildren;\n                for (var i = 0; i < cnt; i++) {\n                    var obj = this._view.getChildAt(i);\n                    if (obj.group != null && obj.group.name == \"btns\")\n                        obj.onClick(this.runDemo, this);\n                }\n                this._demoObjects = {};\n            });\n        });\n    }\n    onClickBack(evt) {\n        this._cc.selectedIndex = 0;\n        this._backBtn.visible = false;\n    }\n    runDemo(pointer, gameObject) {\n        const owner = gameObject[\"$owner\"];\n        var type = owner.name.substr(4);\n        var obj = this._demoObjects[type];\n        // if (obj == null) {\n        fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.UIPackage.createObject(\"Basics\", \"Demo_\" + type).then((obj) => {\n            this._curView = obj.asCom;\n            this._demoObjects[type] = this._curView;\n            this._demoContainer.removeChildren();\n            this._demoContainer.addChild(this._curView);\n            this._cc.selectedIndex = 1;\n            this._backBtn.visible = true;\n            switch (type) {\n                case \"Button\":\n                    this.playButton();\n                    break;\n                case \"Text\":\n                    this.playText();\n                    break;\n                case \"Window\":\n                    this.playWindow();\n                    break;\n                case \"Popup\":\n                    this.playPopup();\n                    break;\n                case \"Drag&Drop\":\n                    this.playDragDrop();\n                    break;\n                case \"Depth\":\n                    this.playDepth();\n                    break;\n                case \"Grid\":\n                    this.playGrid();\n                    break;\n                case \"ProgressBar\":\n                    if (!this._progressTimeEvent)\n                        this._progressTimeEvent = { delay: this._timeDelta, callback: this.__playProgress, callbackScope: this, loop: true };\n                    this.playProgressBar();\n                    break;\n                case \"Panel\":\n                    this._curView.setXY(100, 100);\n                    break;\n            }\n        });\n        // }\n    }\n    //------------------------------\n    playButton() {\n        var obj = this._demoObjects[\"Button\"];\n        obj.getChild(\"n13\").onClick(this.__clickButton, this);\n    }\n    __clickButton() {\n        console.log(\"click button\");\n    }\n    //------------------------------\n    playText() {\n        var obj = this._demoObjects[\"Text\"];\n        // obj.getChild(\"n12\").on(Laya.Event.LINK, this, this.__clickLink);\n        obj.getChild(\"n25\").onClick(this.__clickGetInput, this);\n    }\n    __clickLink(link) {\n        var obj = this._demoObjects[\"Text\"];\n        obj.getChild(\"n12\").text = \"[img]ui://9leh0eyft9fj5f[/img][color=#FF0000]你点击了链接[/color]：\" + link;\n    }\n    __clickGetInput() {\n        var obj = this._demoObjects[\"Text\"];\n        obj.getChild(\"n24\").text = obj.getChild(\"n22\").text;\n    }\n    playWindow() {\n        var obj = this._demoObjects[\"Window\"];\n        obj.getChild(\"n0\").onClick(this.__clickWindowA, this);\n        obj.getChild(\"n1\").onClick(this.__clickWindowB, this);\n    }\n    __clickWindowA() {\n        if (this._winA == null)\n            this._winA = new _TestWin__WEBPACK_IMPORTED_MODULE_1__.WindowA();\n        this._winA.show();\n    }\n    __clickWindowB() {\n        if (this._winB == null)\n            this._winB = new _TestWin__WEBPACK_IMPORTED_MODULE_1__.WindowB();\n        this._winB.show();\n    }\n    playPopup() {\n        const fun = () => {\n            var obj = this._demoObjects[\"Popup\"];\n            var btn = obj.getChild(\"n0\");\n            btn.onClick(this.__clickPopup1, this);\n            var btn2 = obj.getChild(\"n1\");\n            btn2.onClick(this.__clickPopup2, this);\n        };\n        if (this._pm == null) {\n            this._pm = new fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.PopupMenu();\n            this._pm.addItem(\"Item 1\");\n            this._pm.addItem(\"Item 2\");\n            this._pm.addItem(\"Item 3\");\n            this._pm.addItem(\"Item 4\");\n            if (this._popupCom == null) {\n                fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.UIPackage.createObject(\"Basics\", \"Component12\").then((obj) => {\n                    this._popupCom = obj.asCom;\n                    this._popupCom.center();\n                    fun();\n                });\n            }\n            else {\n                fun();\n            }\n        }\n        else {\n            fun();\n        }\n    }\n    __clickPopup1(pointer, gameObject) {\n        const obj = gameObject[\"$owner\"];\n        var btn = obj;\n        this._pm.show(btn, true);\n    }\n    __clickPopup2() {\n        fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.GRoot.inst.showPopup(this._popupCom);\n    }\n    //------------------------------\n    playDragDrop() {\n        var obj = this._demoObjects[\"Drag&Drop\"];\n        var btnA = obj.getChild(\"a\");\n        btnA.draggable = true;\n        var btnB = obj.getChild(\"b\").asButton;\n        btnB.draggable = true;\n        btnB.on(Phaser.Input.Events.DRAG_START, this.__onDragStart, this);\n        var btnC = obj.getChild(\"c\").asButton;\n        btnC.icon = null;\n        btnC.on(Phaser.Input.Events.DROP, this.__onDrop, this);\n        var btnD = obj.getChild(\"d\");\n        btnD.draggable = true;\n        var bounds = obj.getChild(\"bounds\");\n        var rect = bounds.localToGlobalRect(0, 0, bounds.width, bounds.height);\n        rect = fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.GRoot.inst.globalToLocalRect(rect.x, rect.y, rect.width, rect.height, rect);\n        //因为这时候面板还在从右往左动，所以rect不准确，需要用相对位置算出最终停下来的范围\n        rect.x -= obj.parent.x;\n        btnD.dragBounds = rect;\n    }\n    __onDragStart(pointer, gameObject) {\n        const obj = gameObject[\"$owner\"];\n        var btn = obj;\n        btn.stopDrag(); //取消对原目标的拖动，换成一个替代品\n        fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.DragDropManager.inst.startDrag(btn, btn.icon, btn.icon);\n    }\n    __onDrop(pointer, gameObject) {\n        const obj = gameObject[\"$owner\"];\n        var btn = obj;\n        // btn.icon = data;\n    }\n    playDepth() {\n        var obj = this._demoObjects[\"Depth\"];\n        var testContainer = obj.getChild(\"n22\").asCom;\n        var fixedObj = testContainer.getChild(\"n0\");\n        fixedObj.sortingOrder = 100;\n        fixedObj.draggable = true;\n        var numChildren = testContainer.numChildren;\n        var i = 0;\n        while (i < numChildren) {\n            var child = testContainer.getChildAt(i);\n            if (child != fixedObj) {\n                testContainer.removeChildAt(i);\n                numChildren--;\n            }\n            else\n                i++;\n        }\n        this.startPos.x = fixedObj.x;\n        this.startPos.y = fixedObj.y;\n        obj.getChild(\"btn0\").onClick(this.__click1, this);\n        obj.getChild(\"btn1\").onClick(this.__click2, this);\n    }\n    __click1() {\n        var graph = new fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.GGraph(this, fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.ObjectType.Graph);\n        this.startPos.x += 10;\n        this.startPos.y += 10;\n        graph.setXY(this.startPos.x, this.startPos.y);\n        graph.setSize(150, 150);\n        graph.drawRect(1, \"#000000\", \"#FF0000\");\n        var obj = this._demoObjects[\"Depth\"];\n        obj.getChild(\"n22\").asCom.addChild(graph);\n    }\n    __click2() {\n        var graph = new fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.GGraph(this, fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.ObjectType.Graph);\n        this.startPos.x += 10;\n        this.startPos.y += 10;\n        graph.setXY(this.startPos.x, this.startPos.y);\n        graph.setSize(150, 150);\n        graph.drawRect(1, \"#000000\", \"#00FF00\");\n        graph.sortingOrder = 200;\n        var obj = this._demoObjects[\"Depth\"];\n        obj.getChild(\"n22\").asCom.addChild(graph);\n    }\n    //------------------------------\n    playGrid() {\n        var obj = this._demoObjects[\"Grid\"];\n        var list1 = obj.getChild(\"list1\").asList;\n        list1.removeChildrenToPool();\n        var testNames = [\"苹果手机操作系统\", \"安卓手机操作系统\", \"微软手机操作系统\", \"微软桌面操作系统\", \"苹果桌面操作系统\", \"未知操作系统\"];\n        var testColors = [0xFFFF00, 0xFF0000, 0xFFFFFF, 0x0000FF];\n        var cnt = testNames.length;\n        const fun = (i) => {\n            if (i >= cnt)\n                return;\n            list1.addItemFromPool().then((obj) => {\n                var item = obj.asButton;\n                item.getChild(\"t0\").text = \"\" + (i + 1);\n                item.getChild(\"t1\").text = testNames[i];\n                item.getChild(\"t2\").asTextField.color = fairygui_phaser__WEBPACK_IMPORTED_MODULE_0__.Utils.toHexColor(testColors[Math.floor(Math.random() * 4)]);\n                item.getChild(\"star\").asProgress.value = (Math.floor(Math.random() * 3) + 1) / 3 * 100;\n                fun(++i);\n            });\n        };\n        fun(0);\n        // for (var i: number = 0; i < cnt; i++) {\n        //     var item: GButton = list1.addItemFromPool().asButton;\n        //     item.getChild(\"t0\").text = \"\" + (i + 1);\n        //     item.getChild(\"t1\").text = testNames[i];\n        //     item.getChild(\"t2\").asTextField.color = Utils.toHexColor(testColors[Math.floor(Math.random() * 4)]);\n        //     item.getChild(\"star\").asProgress.value = (Math.floor(Math.random() * 3) + 1) / 3 * 100;\n        // }\n        var list2 = obj.getChild(\"list2\").asList;\n        list2.removeChildrenToPool();\n        const fun1 = (i) => {\n            if (i >= cnt)\n                return;\n            list2.addItemFromPool().then((obj) => {\n                var item = obj.asButton;\n                item.getChild(\"cb\").asButton.selected = false;\n                item.getChild(\"t1\").text = testNames[i];\n                item.getChild(\"mc\").asMovieClip.playing = i % 2 == 0;\n                item.getChild(\"t3\").text = \"\" + Math.floor(Math.random() * 10000);\n            });\n            fun1(++i);\n        };\n        fun1(0);\n        // for (var i: number = 0; i < cnt; i++) {\n        //     var item: GButton = list2.addItemFromPool().asButton;\n        //     item.getChild(\"cb\").asButton.selected = false;\n        //     item.getChild(\"t1\").text = testNames[i];\n        //     item.getChild(\"mc\").asMovieClip.playing = i % 2 == 0;\n        //     item.getChild(\"t3\").text = \"\" + Math.floor(Math.random() * 10000)\n        // }\n    }\n    //---------------------------------------------\n    playProgressBar() {\n        this.__removeTimer();\n        if (!this._progressTime)\n            this._progressTime = this.time.addEvent(this._progressTimeEvent);\n        // obj.on(Event.UNDISPLAY, this.__removeTimer, this);\n    }\n    __removeTimer() {\n        // timer.clear(this, this.__playProgress);\n        if (this._progressTime) {\n            this._progressTime.remove(false);\n            this._progressTime = null;\n            //console.log(\"remove tweenupdate\");\n        }\n    }\n    __playProgress() {\n        if (!this._curView)\n            return;\n        var obj = this._curView;\n        var cnt = obj.numChildren;\n        for (var i = 0; i < cnt; i++) {\n            // if (i != 3 && i != 0) continue;\n            var child = obj.getChildAt(i);\n            if (child != null) {\n                child.value += 1;\n                if (child.value > child.max)\n                    child.value = 0;\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack://FairyGuiTest/./src/Basics/BasicsScene.ts?");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("cc982d4335eef8b4d21c")
/******/ })();
/******/ 
/******/ }
);